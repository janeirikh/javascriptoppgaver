<div id="page-content-wrapper">
    <div class="container-fluid">
        <div class="row exercise-description">
            <p class="col-lg-12">
                <h1>Promises / Fetch - Oppgave 2</h1>
                <p>
                    Javascript-koden kan fylles inn i filen
                    <code>promise_exercise_2.js</code>
                    som finnes i mappen <code>public/promise</code>.
                </p>
                <h2>Oppgave A</h2>
                <p>
                    På URL-en <code>GET localhost:3000/message.json</code> får du et JSON-objekt som er persistert på
                    serveren. Dette objektet inneholder en tekstlig melding og tidspunktet for når meldingen ble lagret.
                    Et eksempel:
                </p>

                <pre>
{
    "text": "Første beskjed! Automatisk opprettet ved serveroppstart.",
    "posted": "2015-08-25T16:21:24.183Z"
}</pre>

                <p>
                    Bruk
                    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank">
                        fetch-API-et
                    </a>
                    til JavaScript for å hente ressursen fra serveren og vise den på denne siden. Meldingen skal vises i
                    elementet med ID <code>messageText</code>, og tidspunktet skal vises i elementet med ID
                    <code>messagePosted</code>.
                </p>
                <h2>Oppgave B</h2>
                <p>
                    På URL-en <code>POST localhost:3000/message.json</code> kan du poste en melding som et JSON-objekt.
                    Serveren forventer følgende struktur på JSON-objektet:
                </p>
                <pre>
{
    "text": "-Din beskjed her-"
}</pre>
                <p>
                    Serveren vil persistere meldingen din, merke seg tidspunktet du sendte den på, og sende den nye
                    meldingen tilbake til deg med riktig tidspunkt. Så fort du får svaret fra serveren, skal du
                    oppdatere visningen av meldingen og tidspunktet, slik som i forrige oppgave.
                </p>

                <h2>Oppgave C</h2>
                <p>
                    Dersom du ikke sender et JSON-objekt til <code>POST localhost:3000/message.json</code>, eller
                    JSON-objektet ikke inneholder et <em>text</em>-attributt, får du <code>400 Bad Request</code>.
                    Fremprovoser denne feilmeldingen, og bruk promise sin <code>catch</code>-metode for å alerte
                    feilmeldingen til brukeren.
                </p>
                <p>
                    <span class="label label-warning">Hint!</span> Bruk <code>response.status</code> for å verifisere
                    om forespørselen har gått fint.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 exercise-container">
                <hr />
                <h2>Siste melding fra server:</h2>
                <blockquote id="messageText"></blockquote>
                <p class="text-muted">Melding postet: <span id="messagePosted"></span></p>
                <div>
                    <form id="updateMessageForm">
                        <input name="messageInput" class="form-control" type="text" size="40"
                               placeholder="Oppdater beskjed her ..." />
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/es6-promise.js"></script>
<script type="text/javascript" src="js/fetch.js"></script>
<script type="text/javascript" src="promise/promise_exercise_2.js"></script>